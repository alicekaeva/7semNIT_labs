{% macro render_list(list) %}
   {% set n = len(list) %}
   {% for i in range(n) %}
        {% if i == n - 1 %}
            <li>{{list[i]}}.</li>
        {% else %}
            <li>{{list[i]}},</li>
        {% endif %}
   {% endfor %}
{% endmacro %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title> Пример JINJA2 </title>
</head>
<body>
    <p>
        Привет,
        {% if user[3] == "ж" %}
         студентка
        {% else %}
         студент
        {% endif %}
        <b style="color: green">{{add_spaces(user[0])}}</b>!
    </p>
    <p>
        Ваша образовательная программа <b>{{user[4]}} {{user[1]}}</b>.
    </p>
    <p>
        Вы изучаете {{n}} {{writing(n)}}:<br>
        <ul>
            {{ render_list(user[2]) }}
        </ul>
    </p>
</body>
</html>